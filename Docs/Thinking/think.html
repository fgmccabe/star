<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Francis G. McCabe, Michael Sperber">
<meta name="copyright" content="2025 and beyond">
<title>Thinking About Star</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="book">
<div id="header">
<h1>Thinking About Star</h1>
<div class="details">
<span id="author" class="author">Francis G. McCabe</span><br>
<span id="email" class="email"><a href="mailto:francis.g.mccabe@gmail.com">francis.g.mccabe@gmail.com</a></span><br>
<span id="author2" class="author">Michael Sperber</span><br>
<span id="email2" class="email"><a href="mailto:michael.sperber@active-group.de">michael.sperber@active-group.de</a></span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preface">Preface</a></li>
<li><a href="#_why_star">Why Star?</a>
<ul class="sectlevel2">
<li><a href="#_functional_first">Functional First</a></li>
<li><a href="#_asynchronous_code">Asynchronous Code</a></li>
<li><a href="#_star_is_rich">Star is Rich</a></li>
<li><a href="#_a_little_context">A Little Context</a></li>
</ul>
</li>
<li><a href="#_a_tour_of_star">A Tour of Star</a>
<ul class="sectlevel2">
<li><a href="#_texture">Texture</a></li>
<li><a href="#_equations_as_cases">Equations as Cases</a></li>
<li><a href="#_higher_order_functions">Higher Order Functions</a></li>
<li><a href="#_defining_types">Defining Types</a></li>
<li><a href="#_collections">Collections</a></li>
<li><a href="#_contracts">Contracts</a></li>
<li><a href="#_other_features">Other Features</a></li>
</ul>
</li>
<li><a href="#_sieve_of_erastosthenes">Sieve of Erastosthenes</a>
<ul class="sectlevel2">
<li><a href="#_a_sieve_collection">A Sieve Collection</a></li>
<li><a href="#_a_sieve_task">A Sieve Task</a></li>
<li><a href="#_main_sequence">Main Sequence</a></li>
</ul>
</li>
<li><a href="#_in_conclusion">In Conclusion</a></li>
<li><a href="#_bibliography">Bibliography</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_preface">Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Star is a functional, multi-paradigm and extensible programming
language. It is a full-scale language, capable of expressing many
kinds of program. As such it is a rich language with many features.
Star was originally developed as part of a framework for processing a
range of real-time business applications such as factory scheduling
and data analytics.  This white paper explores some of the basic
features of the language and shows by example how it can be used to
solve problems.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_star">Why Star?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Star is first of all a general purpose programming language. You can
use it to effectively solve problems in many domains. Star was
originally developed to help write analytical and statistical
applications. However, it has evolved into a general purpose
problem-oriented programming language.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> Many of the features
and functionalities of the platform are expressed in a way that is
consistent with Star. As such, it plays a key role in enabling the
different elements of an application built on the platform to work
smoothly together.</p>
</div>
<div class="sect2">
<h3 id="_functional_first">Functional First</h3>
<div class="paragraph">
<p>Star is a &#8216;functional-first&#8217; programming language. What this means is
that Star makes it easier and more natural to write in a functional
style.</p>
</div>
<div class="sect3">
<h4 id="_verbs_as_well_as_nouns">Verbs as well as Nouns</h4>
<div class="paragraph">
<p>Object oriented languages have a very finely developed sense of the
noun. An object is intrinsically a noun; objects reference concrete or
abstract things that a programmer is manipulating. The notation of
classes, interfaces, inheritance and so on represents a powerful set
of concepts for organizing the application&#8217;s nouns.</p>
</div>
<div class="paragraph">
<p>However, just as in spoken languages like English, verbs are also
important: what you do with objects is at least as important as the
objects themselves. Most OO languages do not treat verbs&#8201;&#8212;&#8201;a.k.a. methods – with the same respect that they confer on nouns.</p>
</div>
<div class="paragraph">
<p>The result is that methods are written using a vocabulary that a
programmer in the 1970&#8217;s would be completely familiar with – even when
the same programmer would find classes and interfaces novel concepts.</p>
</div>
<div class="paragraph">
<p>Functional languages give more weight to the verbs. A function is a
first class value and there are many ways in which functions can be
combined and abstracted. The result is that the expression of control
in a functional language can be subtler and more expressive than is
possible in most OO languages. This makes a material difference to the
productivity of the programmer and can also make a difference in the
readability of the code.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_code">Asynchronous Code</h3>
<div class="paragraph">
<p>Many modern software environments are better suited to <em>asynchronous</em>
computations than <em>synchronous</em> computations. For example, it takes
take for a web browser to download a resource; and it makes for a
better user experience if the application can continue to function
even while waiting for the download to complete.</p>
</div>
<div class="paragraph">
<p>This is even more true in an Enterprise setting where long-running
transactions are common.</p>
</div>
<div class="paragraph">
<p>Star has strong coroutining capabilities: with support for yield-style
generators, asynchronous programming and green threads. This
simplifies the design of reactive applications and allows long-running
transactions to be modeled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_star_is_rich">Star is Rich</h3>
<div class="paragraph">
<p>Star is a full-featured language. It is an intentionally rich
language. In addition to the features described here are concurrency
features, data abstraction features that include the concept of
existentially quantified types – that enables abstract data types –
and computation expressions – that are important when designing
systems that rely on being able to delay and control how expressions
are evaluated; and many more.</p>
</div>
<div class="paragraph">
<p>This is part of a <code>batteries included</code> strategy: we can enhance
programmer productivity by including many of the features that they
are likely to need. We can support this strategy by making it more
straightforward to develop those included features in Star.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_little_context">A Little Context</h3>
<div class="paragraph">
<p>The origins of Star lie in a platform that was originally oriented
towards complex event processing applications.<a href="#luckham:2012">[luckham:2012]</a>
StarRules — as it was known then — was a rules language that allowed
one to express CEP-style rules succinctly.</p>
</div>
<div class="paragraph">
<p>However, as often happens, requirements evolved and CEP itself became
just one of many application areas that the Starview platform can
address. The same pressures for generality in the platform lead to a
greater interest in extensibility and generality in the programming
language.</p>
</div>
<div class="paragraph">
<p>In the chapters that follow, we will focus on three major features of
Star that define much of the essence of Star: actors, contracts and
features that are useful in representing complex information, such as
knowledge representation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_tour_of_star">A Tour of Star</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_texture">Texture</h3>
<div class="paragraph">
<p>All programming languages can be said to have a particular style or
texture. This is often so strong that it only needs a single line of
source code to be able to identify a programming language. In the case
of Star, this line might be (we will explain what it means a bit later on):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">factorial:all t ~~ arith[t] |: (t)=&gt;t.</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a <em>type annotation</em>: a description of the type of a
variable&#8201;&#8212;&#8201;in this case <code>factorial</code>. It is a function type&#8201;&#8212;&#8201;which means that we can call <code>factorial</code>. It is also, somewhat
unusually for factorial, <em>generic</em>: the factorial of any type can
be computed&#8201;&#8212;&#8201;provided that `arith`metic has been implemented for it.</p>
</div>
<div class="paragraph">
<p>Although this is not the simplest type annotation; overall, the
texture of Star is designed to enhance the readability of
programs. Readability is important because many people have to be able
to read programs; perhaps more than are involved in writing them. Even
with an emphasis on readability, the power of the language is such
that Star programs tend to be shorter than their equivalents written
in languages like Java.</p>
</div>
<div class="paragraph">
<p>This is a function definition that should be more straightforward to
understand:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">doubleMe:(integer)=&gt;integer.
doubleMe(x) =&gt; x + x.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although mostly not mandatory, in most cases we strongly favor a
programming style where the type of functions and other top-level
definitions are declared explicitly. Here is another function
calling the just-defined <code>doubleMe</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">doubleUs:(integer,integer)=&gt;integer.
doubleUs(x, y) =&gt; doubleMe(x) + doubleMe(y).</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete Star program that uses the <code>doubleMe</code> and
<code>doubleUs</code> functions to print a result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">sample.first{
  import star. -- Standard types and functions

  doubleMe:(integer)=&gt;integer.
  doubleMe(x) =&gt; x + x.

  doubleUs:(integer,integer)=&gt;integer.
  doubleUs(x, y) =&gt; doubleMe(x) + doubleMe(y).

  main:()=&gt;().
  main() =&gt; valof {
    show doubleUs(3,4);
    valis ()
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_equations_as_cases">Equations as Cases</h3>
<div class="paragraph">
<p>Many functional programming languages — including Star — are based on
an equational style. Equational programs are written as a series of
equations; for example, in the credit function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">credit:(customer)=&gt;float.
credit(C) where inGoodStanding(C) =&gt; 0.15.
credit(C) where inDefault(C) =&gt; -0.1.
  ...
credit(_) default =&gt; 0.0.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each line of this definition is an equation. It specifies the meaning
of the credit function in a restricted setting – the complete function
is understood by combining the cases together.</p>
</div>
<div class="paragraph">
<p>Using equations we can separate out the different cases for the
customer&#8217;s credit and &#8216;work on them separately&#8217;. This allows the
programmer to focus attention and allows for rapid editing and
reorganization should the need arise.  Case-based approaches to
programming are significantly more productive than traditional
if-then-else procedural programming.</p>
</div>
<div class="sect3">
<h4 id="_patterns">Patterns</h4>
<div class="paragraph">
<p>Patterns and pattern matching are ubiquitous in Star. Nearly all
literal forms have a pattern equivalent that allows matching and, most
importantly, de-structuring such values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">lucky:(integer)=&gt;string.
lucky(7) =&gt; "LUCKY NUMBER SEVEN!".
lucky(x) default =&gt; "Sorry, you’re out of luck, pal!"

fctrl:(integer)=&gt;integer.
fctrl(0) =&gt; 1.
fctrl(n) where n &gt; 0 =&gt; n * fctrl(n-1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In fact, this last function is not fully paradigmatic of Star. A
better, albeit more complex, version of this would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">factorial:all t ~~ arith[t] |: (t)=&gt;t.
factorial(zero) =&gt; one.
factorial(n) where n &gt; zero =&gt; n * factorial(n-one)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This version of factorial will work with integers, floats anything
that can do arithmetic. Here we use special variables <code>zero</code> and
<code>one</code> to denote 0 and 1 in a type-agnostic way.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_higher_order_functions">Higher Order Functions</h3>
<div class="paragraph">
<p>Star supports higher-order functions. The following <code>apply</code> function
corresponds to the familiar map function from other functional
languages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">apply:all s,t ~~ ((s)=&gt;t,cons[s])=&gt;cons[t].
apply(f, .nil) =&gt; .nil.
apply(f, .cons(x, xs)) =&gt;
      .cons(f(x), apply(f, xs)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although Star has a sophisticated type system that supports automatic
type inference, we recommend that that programmers supply type
annotations, which often improve readability.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Specifically, the rule for type inference is that Star will
automatically infer the types of all variables; but will never infer a
<em>generic</em>&#8201;&#8212;&#8201;or quantified&#8201;&#8212;&#8201;type for functions.</p>
</div>
<div class="paragraph">
<p>This represents an interesting balance between convenience&#8201;&#8212;&#8201;many
programs are not actually fully generic&#8201;&#8212;&#8201;and precision.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, since <code>apply</code> is supposed to be generic, we are required to
supply a type annotation for it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">apply:all s,t ~~ ((s)=&gt;t,cons[s])=&gt;cons[t].</code></pre>
</div>
</div>
<div class="paragraph">
<p>This states that <code>apply</code> is generic in two types, that it takes a
function argument and a <code>cons</code> list argument and returns a new
<code>cons</code> list.</p>
</div>
<div class="paragraph">
<p>For example, we can define functions over collections that allow us to
(say) compute the maximum element in a collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">maximum:all t ~~ arith[t] |: (list[t],t)=&gt;t.
maximum([H,..T]) =&gt; let {
  max([],Mx) =&gt; Mx.
  max([F,..R],Mx) where F&gt;Mx =&gt; max(R,F).
  max([_,..R],Mx) default =&gt; max(R,Mx).
} in max(T,H)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>max</code> function enclosed in the <code>let</code> body uses patterns to
match against the successive elements of the collection.</p>
</div>
<div class="sect3">
<h4 id="_sequence_patterns">Sequence Patterns</h4>
<div class="paragraph">
<p>The pattern form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">[H,..T]</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches any non-empty sequence; and binds the first element of the
sequence to the variable <code>H</code> and the remainder of the sequence to
<code>T</code>.</p>
</div>
<div class="paragraph">
<p>The pattern form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>only matches an empty collection.</p>
</div>
<div class="paragraph">
<p>The <code>maximum</code> function is written in terms of a local function –
<code>max</code> – and a call to that local function. The <code>let</code>
expression is one of the foundations and cornerstones of functional
programming.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Notice that the type annotation for <code>maximum</code> has a special
<code>arith</code> clause attached to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">maximum:all t ~~ arith[t] |: (cons[t],t)=&gt;t.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The clause <code>arith[t] |:</code> means that the type variable <code>t</code> is
<em>constrained</em>&#8201;&#8212;&#8201;it must be a type that <em>implements</em> the
arithmetic contract&#8201;&#8212;&#8201;<code>arith</code>.</p>
</div>
<div class="paragraph">
<p>Type contracts like this one are fairly ubiquitous in Star; they
represent similar functionality to type classes in Haskell or traits
in some modern language like Rust or Go.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_types">Defining Types</h3>
<div class="paragraph">
<p>Like most functional languages, Star supports many forms of sequence
collection natively. One of the more common kinds of list is the ‘cons
list’ a.k.a. single-linked list. Cons lists are defined using a type
definition that introduces the type and its different ‘shapes’:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">all t ~~ cons[t] ::= .nil | .cons(t,cons[t]).</code></pre>
</div>
</div>
<div class="paragraph">
<p>This states that there are two forms of <code>cons</code> lists: the empty cons
list <code>.nil</code>, and a pairing <code>.cons(x, xs)</code> where <code>x</code> is
the first element, and <code>xs</code> is the rest of the list. The
<code>all</code> quantifier at the beginning of the declaration of the <code>cons</code>
type marks the type as a generic type – specifically a universal type.</p>
</div>
<div class="paragraph">
<p>NOTE:
Notice the period in front of the <code>.nil</code> enumeration symbol and
the <code>.cons</code> symbo. This allows us (the compiler and the
programmer) to be more obvious in distinguishing such symbols from
variables. There are other benefits, but clarity is the main
driver.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="paragraph">
<p>Nearly all Star values can be written as literals, including user defined
types like cons. For example, the <code>cons</code> list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">.cons("alpha",.cons("beta",.cons("gamma",.nil)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>contains the strings <code>"alpha"</code>, <code>"beta"</code> and <code>"gamma"</code>.</p>
</div>
<div class="paragraph">
<p>The standard implementation of <code>cons</code> lists in Star also supports
the sequence notation we saw above. So, this list can also be written:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">["alpha", "beta", "gamma"]:cons[string]</code></pre>
</div>
</div>
<div class="paragraph">
<p>NOTE:
We are not allowed to mix strings and integers in the same
list. That is because Star is strongly, statically typed and requires
all elements of a list to have the same type.</p>
</div>
<div class="paragraph">
<p>Just as with sequences, we can define functions over <code>cons</code> lists via
pattern matching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">maxCons:(cons[integer]) =&gt; integer.
maxCons(.cons(x, .nil)) =&gt; x.
maxCons(.cons(x, xs)) default =&gt; let {
     maxRest = maxCons(xs).
   } in (x &gt; maxRest ?? x || maxRest)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first <code>maxCons</code> equation is for <code>cons</code> lists with one
element, where <code>maxCons</code> simply returns that element. The second
equation first computes the maximum of the rest of the list via a
recursive call, and uses a conditional expression to compute the
maximum for the entire list.</p>
</div>
<div class="paragraph">
<p>The expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">(x &gt; maxRest ?? x || maxRest)</code></pre>
</div>
</div>
<div class="paragraph">
<p>is a conditional expression: if <code>x</code> is greater than
<code>maxRest</code> then it is the maximum; otherwise <code>maxRest</code>
is. This is an example of a very well known form of expression that
uses symbolic operators rather than keywords.</p>
</div>
</div>
<div class="sect2">
<h3 id="_collections">Collections</h3>
<div class="paragraph">
<p>Star has a standard way of writing sequences and collections – like
lists and dictionaries. For example, the expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">[4, 8, 15, 16, 42]</code></pre>
</div>
</div>
<div class="paragraph">
<p>denotes the list with the numbers 4, 8, 15, 16 and 42 in it. This
notation – which is called the sequence notation.  We can denote a
different kind of sequences, containing cons elements for example,
using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">[4, 8, 15, 16, 42]:cons[integer]</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, we can even denote a general collection without being explicit
about the type of collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">[4, 8, 15, 16, 42]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this last case, the compiler may have to rely on the context to
fully determine the type of the sequence.</p>
</div>
<div class="paragraph">
<p>As another example, we can see that a dictionary literal is also a
variation on the collection – except that we have keys as well as
values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">{ "alpha"-&gt;1, "beta"-&gt;2 }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_comprehensions">Comprehensions</h4>
<div class="paragraph">
<p>Star has a built-in query expression notation that allows us to avoid
a lot of common recursive forms of definition. For example, the
<code>apply</code> function can be written more succinctly using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">apply(f,C) =&gt; { f(X) | X in C }</code></pre>
</div>
</div>
<div class="paragraph">
<p>the meaning of the expression is equivalent to the recursive
definition we saw of <code>apply</code> above.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contracts">Contracts</h3>
<div class="paragraph">
<p>Star contracts are analogous to type interfaces: they specify the
names and types of a collection of definitions.  For example, the
contract for basic arithmetic is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">contract all t ~~ arith[t] ::= {
    (+) : (t,t)=&gt;t.
    (-) : (t,t)=&gt;t.
    (*) : (t,t)=&gt;t.
    (/) : (t,t)=&gt;t.
    one : t.
    zero : t.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This has the effect of declaring a group of functions that work
together to form a basic arithmetic suite.</p>
</div>
<div class="paragraph">
<p>Once defined, a contract can be used simply by mentioning one of its
members. Thus, in this <code>fact</code> function, the use of the <code>*</code> and <code>-</code>
operators means that <code>fact</code> depends on the <code>arith</code> contract:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">fact(0) =&gt; 1.
fact(X) =&gt; X*fact(X-1)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Although we use <code>*</code> and <code>-</code> using a normal infix notation,
semantically, these are just regular function identifiers. The
contract specifies the types of these operators by enclosing them in
parentheses&#8201;&#8212;&#8201;this is just to inform the compiler that the occurrence
is as an identifier and not as an operator.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we want to state that the type of a variable is
`something' that implements a contract we can do so by adding a
constraint to the variable&#8217;s type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">F : arith[t] |: t</code></pre>
</div>
</div>
<div class="paragraph">
<p>This has the effect to declaring that <code>F&#8217;s type is a type variable —
but one that is constrained such that whatever concrete type it
eventually gets, it must be one that is defined for `arith</code>.</p>
</div>
<div class="paragraph">
<p>In fact, however, this version of factorial is not the most
paradigmatic (sic) version. The reason is that the type signature for
<code>fact</code> is not generic but tied to integer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">fact:(integer)=&gt;integer</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason that <code>fact</code> is not fully generic is interesting: it’s the
presence of the literal numbers 0 and 1 in its definition. The type of
any literal integer is integer! This is enough to force the type of
fact to be restricted to integers.  In particular, Star does not
support implicit coercion, including coercion of literal numbers from
integer to any other type.</p>
</div>
<div class="paragraph">
<p>The solution is simple, if a little strange: we declared in the
<code>arith</code> contract two non-function entries: <code>zero</code> and <code>one</code>.  By
explicitly identifying zero and one as elements of the arith contract
we can use them in lieu of 0 and 1 respectively without committing to
integers.<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="paragraph">
<p>Using <code>one</code> and <code>zero</code>, we can write a much more paradigmatic version of the
factorial function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">factorial(zero) =&gt; one.
factorial(N) =&gt; factorial(N-one)*N.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The type signature for this version of <code>factorial</code> is given by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">factorial: all t ~~ arith[t] |: (t)=&gt;t.</code></pre>
</div>
</div>
<div class="paragraph">
<p>which declares that <code>factorial</code> is a function over any <code>t</code>, provided
that there is an implementation of <code>arith</code> for that <code>t</code>.</p>
</div>
<div class="sect3">
<h4 id="_contracts_as_interfaces">Contracts as Interfaces</h4>
<div class="paragraph">
<p>At their most basic, contracts are a way of denoting `overloaded'
functions. I.e., by giving different implementations of a contract for
different types, it is possible to provide multiple implementations of
a function. For example, there are several implementations of arith
for integers, floats, and so on. It is also straightforward to
implement arith for your own type.</p>
</div>
<div class="paragraph">
<p>However, contracts are a powerful tool in lifting the basic syntax of the language.</p>
</div>
<div class="paragraph">
<p>For example, the sequence notation, introduced earlier, is backed by
two contracts: the <code>stream</code> contract which is used in sequence
patterns and the <code>sequence</code> contract which is used in sequence
expressions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">-- stream contract
public contract all S,E ~~ stream[S -&gt;&gt; E] ::= {
  _eof:(S) =&gt; boolean.
  _hdtl:(S) =&gt; option[(E,S)].
}

public contract all S,E ~~ sequence[S -&gt;&gt; E] ::= {
  _cons:(E,S) =&gt; S.
  _nil:S.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The compiler translates sequence notation to uses of the functions in
these contracts. The result is that sequence expressions are not
<em>special</em>. In fact, it is entirely possible for a user-defined type to
be blessed with the sequence notation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>stream</code> and <code>sequence</code> contracts have a <em>dependency</em>:
<code>E</code>. This means that the contracts specify a dependency between the
overall sequence type and (in this case) the type of sequence
elements. This also means that we can use sequences over types that
are not generic in nature: for example, it is possible to implement
them for <code>string</code> values as well as <code>cons</code> lists.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_contract_implementations">Contract Implementations</h4>
<div class="paragraph">
<p>Contracts are effectively just a type definition. In order to use
them, you need to <em>implement</em> them. For example, the implementation
for <code>stream</code> over <code>cons</code> lists looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">public implementation all x ~~ stream[cons[x] -&gt;&gt; x] =&gt; {
  _eof(.nil) =&gt; .true.
  _eof(.cons(_,_)) =&gt; .false.

  _hdtl(.cons(H,T)) =&gt; .some((H,T)).
  _hdtl(.nil) =&gt; .none.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a specification of semantics, contracts do not address all the
issues. It is not possible, for example, to express that
implementations of arithmetic obey the normal Peano axioms of
arithmetic.</p>
</div>
<div class="paragraph">
<p>Many of the syntactic features of Star are actually backed by
contracts. Apart from sequence expressions, accessing collections,
displaying values, coercions between types and support for coroutines
all represent syntactic features of the language whose semantics is
provided via contracts.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_features">Other Features</h3>
<div class="paragraph">
<p>This tour is necessarily incomplete. Other notable features of Star include a
built-in grammar notation, exceptions, yield-style generators, async functions,
and actors.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sieve_of_erastosthenes">Sieve of Erastosthenes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The sieve of Erastothenes is a well-known technique for finding prime
numbers. It is also reasonably efficient, especially for smaller
primes and where you want a deterministic algorithm.</p>
</div>
<div class="paragraph">
<p>This algorithm works by repeatedly removing multiples of primes from a
list of natural numbers.</p>
</div>
<div class="paragraph">
<p>We will explore two ways of implementing this algorithm in Star: the
first using collections, and the second using tasks and coroutining.</p>
</div>
<div class="sect2">
<h3 id="_a_sieve_collection">A Sieve Collection</h3>
<div class="paragraph">
<p>The core step in the sieve algorithm is removing multiples of an
existing prime from the list of candidates. We can express this using
Star&#8217;s filter notation; the expression that returns all the
candidates of a collection that are not multiples of a given number looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">candidates ^/ \((X)=&gt; ~divides(X,P))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>^/</code> function is actually specified in a contract:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">contract all c,e ~~ filter[c-&gt;&gt;e] ::= {
  (^/):(c,(e)=&gt;boolean) =&gt; c.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and Star also has a standard implementation of <code>^/</code> for <code>cons</code> lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">implementation all t ~~ filter[cons[t]-&gt;&gt;t] =&gt; let{.
  filter(L,F) =&gt; case L in {
  | [] =&gt; []
  | [E,..Es] where F(E) =&gt; [E,..filter(Es,F)]
  | [_,..Es] =&gt; filter(Es,F)
  }
.} in {
  (LL ^/ F) =&gt; filter(LL,F)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Defining <code>divides</code> itself is straightforward, but is allows us to
introduce Star&#8217;s exception handling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">divides(X,Y) =&gt; (try Y%X==0 catch {_ =&gt; .false}).</code></pre>
</div>
</div>
<div class="paragraph">
<p>This states that <code>X</code> evenly divides <code>Y</code> if Y modulo X is zero. Since
modulo zero is equivalent to division by zero, Star requires that <code>%</code>
expressions are protected by a <code>try</code> <code>catch</code> handler. Our catch
handler simply returns <code>.false</code>&#8201;&#8212;&#8201;because we dont believe that 0 is a
divisor.</p>
</div>
<div class="paragraph">
<p>Given this ground work, we can now give a complete definition of sieve&#8201;&#8212;&#8201;for a finite upper bound:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">sieve:(integer) =&gt; cons[integer].
sieve(Bound) =&gt; let{.
  filter(Candidates,P) =&gt; Candidates^/nonMultiple(P).

  nonMultiple(P) =&gt; (X)=&gt;~divides(X,P).

  primes([P,..Rest]) =&gt; [P,..primes(filter(Rest,P))].
.} in primes(iota(2,Bound))</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>iota</code> is another standard function that returns a sequence of
integers between a lower and upper bound.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
how the <code>nonMultiple</code> function is set up to return a function
rather than an individual decision. This makes the formulation of
<code>filter</code> a little easier to read.<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We are not claiming here that our implementation of the sieve of
Erastosthenes is the fastest: it is not. However, it is, we believe, a
clear exposition of the algorithm.</p>
</div>
<div class="paragraph">
<p>One limitation of this version is that it depends on a previously
built list of integers&#8201;&#8212;&#8201;hence the use of <code>iota</code>. Our next version,
using tasks, removes this limitation&#8201;&#8212;&#8201;and gives us an opportunity to
introduce Star&#8217;s coroutining features.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_sieve_task">A Sieve Task</h3>
<div class="paragraph">
<p>Coroutines enable non-sequential forms of control. Star has several
models of coroutining; in this example we will focus on one of the
simpler models: generators.</p>
</div>
<div class="paragraph">
<p>A generator is an expression that returns its values by performing a
<code>yield</code> operation. Normally generators are paired with <code>for loops</code>:
the yielded values are used in the body of the for loop.</p>
</div>
<div class="paragraph">
<p>For example, this definition defines <code>genOdds</code> to be a generator of
odd integers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">genOdds = generator{
  Ix := 1;
  while .true do{
    Ix := Ix!+2;
    yield Ix!
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The definition of <code>genOdds</code> also illustrates how assignment is done in
Star.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another generator that we will need for generating prime numbers is
one that reports on filtered numbered. For this we have a generator
function: a function whose value is a generator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">primeFilter:(integer,generator[integer]) =&gt; generator[integer].
primeFilter(Prm,Gen) =&gt; generator{
   for Nxt : Gen do{
     if ~divides(Nxt,Prm) then
       yield Nxt
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>primeFilter</code> function takes a generator as an argument, and
returns a new generator that filters the input generator&#8217;s results.</p>
</div>
<div class="paragraph">
<p>Our main function&#8217;s role is to stitch together generators in a
recursive fashion to actually generate prime numbers&#8201;&#8212;&#8201;and to report
the first prime larger than the requested minimum:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">primeSieve:(integer,generator[integer]) =&gt; integer
primeSieve(Limit,Gen) =&gt; valof{
  case Gen resume ._next in {
  | ._yld(Nxt) =&gt; {
      if Nxt&lt;Limit then{
        valinns primeSieve(Limit,primeFilter(Nxt,Gen))
      }
      else
        valis Nxt
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We put a limit on <code>primeSieve</code>: the highest prime that we are
looking for. But, if we had not used this, <code>primeSieve</code> would keep
going generating prime numbers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The clause <code>case Gen resume &#8230;&#8203;</code> pokes a hole in the generator abstraction
and exposes Star&#8217;s underlying coroutining features&#8201;&#8212;&#8201;which are based on the
concept of a reified coroutine: sometimes known as a fiber. Nearly always,
generators are not used in the way that is shown here.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_main_sequence">Main Sequence</h3>
<div class="paragraph">
<p>To complete the program, we put a driver in a <code>main</code> program that
looks for prime numbers up to some limit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="star">main:(integer)=&gt;().
main(Min) =&gt; valof{
  Prime = primeSieve(Min,genOdds);
  show "first prime greater than $(Min) is $(Prime)"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One of the minor features of Star is the typed nature of the <code>main</code>
function. Specifying that <code>main</code> takes an integer as an argument is
enforced on the command line. We can execute this sieve of
erastosthenes as a command in a terminal using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>star eras 3000
first prime greater than 3000 is 3001</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_conclusion">In Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We hope that you have enjoyed this short tour of Star. If you would like to try
it out, it is available on github: <a href="https://github.com/fgmccabe/star" class="bare">https://github.com/fgmccabe/star</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography">Bibliography</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="luckham:2012"></a>[luckham:2012] Luckham, David, <em>Event Processing for Business:
Organizing the Real-Time Enterprise</em>, John Wiley &amp; Sons, 2012.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. As opposed to a systems-oriented programming language like C.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. It <em>does</em> have the somewhat unfortunate side-effect of requiring a period in front of boolean <code>.true</code> and <code>.false</code> literals.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. There is some limited Mathematical justification for this: the <code>arith</code> contract defines a <em>Field</em> which requires zero elements for the two operators (<code>+</code> and <code>*</code>).
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. Unlike many functional languages, Star does not use so-called function currying.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-07-09 20:28:37 -0700
</div>
</div>
</body>
</html>