{\rtf1\ansi\ansicpg1252\cocoartf1561\cocoasubrtf200
{\fonttbl\f0\froman\fcharset0 Palatino-Roman;\f1\fnil\fcharset0 Georgia;\f2\fswiss\fcharset0 Helvetica;
\f3\fnil\fcharset0 Menlo-Regular;\f4\fmodern\fcharset0 Courier;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;}
\pard\tx360\tx720\tx1080\tx1440\tx1800\tx2160\tx2880\tx3600\tx4320\fi360\sl264\slmult1\pardirnatural\partightenfactor0

\f0\fs26 \cf0 The second form of speech action is the query. This represents a question being posed. For example, to query an (augmented) account actor for its balances one might use:
\f1\fs24 \cf2 \expnd0\expndtw0\kerning0
\
\pard\tx720\tx1080\tx1440\tx1800\tx2160\li720\pardirnatural\partightenfactor0

\f2 \cf2 <$Scr_Ps::0>
\f3 query B with\
\'a0\'a0cons of \{ all X where X in balances &&\
\'a0\'a0\'a0\'a0X.ts>=yesterday\}\
\pard\tx360\tx720\tx1080\tx1440\tx1800\tx2160\tx2880\tx3600\tx4320\fi360\sl264\slmult1\pardirnatural\partightenfactor0

\f2 \cf0 \kerning1\expnd0\expndtw0 <!$Scr_Ps::0>
\f0\fs26 Note that this expression combines two different elements of Star: a query speech action and a query expression. The expression
\f1\fs24 \cf2 \expnd0\expndtw0\kerning0
\
\pard\tx720\tx1080\tx1440\tx1800\tx2160\li720\pardirnatural\partightenfactor0

\f2 \cf2 <$Scr_Ps::0>
\f3 cons of \{ all X where X in balances and X.ts>=yesterday \}\
\pard\tx360\tx720\tx1080\tx1440\tx1800\tx2160\tx2880\tx3600\tx4320\fi360\sl264\slmult1\pardirnatural\partightenfactor0

\f2 \cf0 \kerning1\expnd0\expndtw0 <!$Scr_Ps::0>
\f0\fs26 represents the question:\
\pard\tx720\tx1080\tx1440\li720\sl264\slmult1\sb240\sa240\pardirnatural\partightenfactor0

\f2\fs24 \cf2 \expnd0\expndtw0\kerning0
<$Scr_Ps::1>
\f1\i All the 
\f4\i0 \cf2 X
\f1\i \cf2 's, where 
\f4\i0 \cf2 X
\f1\i \cf2  is in the 
\f4\i0 \cf2 balances
\f1\i \cf2  collection and where 
\f4\i0 \cf2 X
\f1\i \cf2 's time stamp is more recent than yesterday.\
\pard\tx360\tx720\tx1080\tx1440\tx1800\tx2160\tx2880\tx3600\tx4320\fi360\sl264\slmult1\pardirnatural\partightenfactor0

\f2\i0 \cf0 \kerning1\expnd0\expndtw0 <!$Scr_Ps::1>
\f0\fs26 The answer is presented as a 
\f2\fs24 <$Scr_Cs::2>
\f3\fs22 cons
\f2\fs24 <!$Scr_Cs::2>
\f0\fs26  list. Different forms of query allow the result to be presented as any form of collection \'96 or be further processed via reduction.\
Query expressions have many uses. The full query expression notation has similar expressive power to that of SQL; except that instead of being restricted to flat tables, Star's query notation can be applied to a large variety of types of data.\
There is no special kind of rule within an actor that is used to respond to query speech actions. Instead the response to the query is determined simply by evaluating the whole expression relative to the actor's internal environment.\
However, there may be situations where this permissive approach to handling query speech actions is not appropriate. In that situation, it is possible to get behind the scenes and intercept thequery \'97 or any speech action \'97 and analyze it before deciding to honor the query.}