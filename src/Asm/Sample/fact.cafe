-- fact in cafe assembler
-- Equivalent to
-- fact(0) => 1
-- fact(N) => fact(N-1)*N

package test.fact

fact/1 :: "F(i)i"
     enter 0
     ld a[0]
     bnz nonZero
     ld 1
     ret
nonZero:
     ld a[0]  -- start call to fact(N-1)
     dec
     call fact/1 -- fact itself
     frame "()"
     ld a[0]
     muli
     ret
     end

_main/0:: "F()()"
local X "i" next last
next:
     enter 0
     ld 5
     call fact/1
     frame "()"
last:
     halt
     end

     end

     

