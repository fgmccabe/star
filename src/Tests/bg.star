test.bg{
  import star.
  import star.assert.

  fact:all x ~~ arith[x],equality[x] |= (x)=>x.
  fact(zero)=>one.
  fact(N)=>N*fact(N-one).

  power:all x ~~ arith[x],comp[x] |= (x,x)=>x.
  power(B,P) => valof{
    R := one;
    L := zero;

    while L!<P do{
      R := R!*B;
      L := L!+one;
    };

    valis R!
  }

  main:(){}.
  main(){
    try{
      assert 0b18446744073709551612 == _str2big("18446744073709551612");
      assert -0b18446744073709551612 == _str2big("-18446744073709551612");

      assert "$(-0b18446744073709551612):(99999999999.9999999);" == "(18446.7440737)";

      assert 0b1234567890234567891223456-0b1234567890234567891223456==zero;

      assert fact(0b100)==0b93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000;

      assert power(0b5,0b200) == 0b62230152778611417071440640537801242405902521687211671331011166147896988340353834411839448231257136169569665895551224821247160434722900390625;

      show _big_div(0b815915283247897734345611269596115894272000000000,0b1307674368000);

      assert _big_div(0b815915283247897734345611269596115894272000000000,0b1307674368000)==(0b623943776229081622823099695104000000,0b0);
    } catch{
      M do {
	logMsg(.severe, "We got error: $(M)")
      }
    }
  }
}
